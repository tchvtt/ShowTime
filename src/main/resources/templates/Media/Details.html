<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:href="@{/main.css}" rel="stylesheet" />
    <title>Details</title>
</head>
<body class="flex flex-col">
    <h1>Details of : <span th:text="${media.title}"></span></h1>
    
    <!-- Affichage des détails d'un film ou d'une série -->
    <p><strong>Titre :</strong> <span th:text="${media.title}"></span></p>
    <p><strong>Overview :</strong> <span th:text="${media.overview}"></span></p>
    <p><strong>Genre :</strong> <span th:text="${media.genre}"></span></p>
    <p><strong>Date de sortie :</strong> <span th:text="${media.releaseDate}"></span></p>
    <p><strong>IDTMDB :</strong> <span th:text="${media.tmdbID}"></span></p>


    <!-- Si c'est un film -->
    <div th:if="${media instanceof T(com.ShowTime.model.Movie)}">
        <p><strong>Duration :</strong> <span th:text="${media.duration}"></span> minutes</p>
    </div>

    <!-- Si c'est une série -->
    <div th:if="${media instanceof T(com.ShowTime.model.TVShow)}">
        <p><strong>Season :</strong> <span th:text="${media.numberOfSeasons}"></span> seasons</p>
        <p><strong>Ended :</strong> <span th:text="${media.isCompleted} ? 'Yes' : 'No'"></span></p>
        <p><strong>Saison :</strong> <span th:text="${media.numberOfSeasons}"></span> saisons</p>
        <p><strong><span th:if="${media instanceof T(com.ShowTime.model.TVShow)}">First </span> Aired :</strong> <span th:text="${media.releaseDate}"></span></p>
    </div>


    <!-- Affichage des acteurs associés au média -->
    <p><strong>Actors :</strong></p>
    <ul class="flex flex-wrap w-3/4">
        <li th:each="actor : ${media.actors}" class="w-1/12 m-5">
            <a th:href="@{/actor/{id}(id=${actor.id})}">
                <img th:src="@{${actor.posterURL}}" alt="Poster of ${actor.name}" width="400" height="400" />
            </a>
            <th:block th:text="${actor.name}"></th:block>
        </li>
    </ul>

    <!-- Affichage des notes associées au média -->
    <h2>Ratings</h2>
    <ul>
        <li th:each="rating : ${ratings}">
            <p><strong th:text="${rating.user.username}">User</strong>:
                <span th:text="${rating.rating}">Rating</span>/5
                <span th:text="${rating.comment}">Comment</span>
            </p>
            <p><small th:text="${rating.date}">Date</small></p>
        </li>
    </ul>

    <div th:if="${media instanceof T(com.ShowTime.model.Movie)}">
        <a th:href="@{/movies}">Back to Movies</a>
    </div>

    <div th:if="${media instanceof T(com.ShowTime.model.TVShow)}">
        <a th:href="@{/tvshows}">Back to TV Shows</a>
    </div>

    <!-- Vous pouvez ajouter plus d'informations en fonction des attributs de votre modèle -->
    <a th:href="@{/}">Homepage</a>


</body>
</html>
